#!/usr/bin/env node

'use strict'

var fs = require('fs')
var program = require('commander')

var pkg = require('../package.json')
var cli = require('../lib/cli')

var repos = {}
var conf = {}

program
  .version(pkg.version)
  .option('-v', 'get version')

program.command('init [git-repo-url]')
  .description('Init in current directory with your git-repo. If omitted, load from .git/config')
  .action(function(repo){
    cli.init(repo)
  })

program.command('start')
  .description('start loader')
  .action(function(repo){
    cli.start()
  })

program.command('watch')
  .description('watch')
  .action(function(repo){
    cli.watch()
  })


program.command('*')
  .action(function(){
    console.log('Command not found.')
    program.outputHelp()
  })

program.parse(process.argv)

if (process.argv.length == 2) {
  program.outputHelp()
}
